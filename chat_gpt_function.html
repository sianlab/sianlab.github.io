<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>[ChatGPT] 챗GPT function 기능 이용해보기</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <!-- custom.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/custom.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- 웹폰트 추가 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="기술 블로그" />
    <link rel="shortcut icon" href="http://localhost:4000/assets/built/images/favicon.jpg" type="image/png" />
    <link rel="canonical" href="http://localhost:4000/chat_gpt_function" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Siansoft" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="[ChatGPT] 챗GPT function 기능 이용해보기" />
    <meta property="og:description" content="서론 작년 말 출시하여 현재 1년도 안 된 사이에 엄청난 이용자가 생긴 AI 대화형 인공지능 ChatGPT(이하 챗GPT). 현재 GPT-4 모델 출시, 플러그인, 추가 기능 등등 많은 업데이트도 되고 있는 상황이다. 하지만 챗GPT의 주 목적은 사람과 자연스러운 대화를 나누는 것이기 때문에 간혹 모르는 주제의 내용임에도 잘못된 정보를 전달하는 등의 현상이 발생한다." />
    <meta property="og:url" content="http://localhost:4000/chat_gpt_function" />
    <meta property="og:image" content="http://localhost:4000/assets/built/images/chatgpt/gpt-logo.jpg" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2023-08-09T17:00:00+09:00" />
    <meta property="article:modified_time" content="2023-08-09T17:00:00+09:00" />
    <meta property="article:tag" content="ChatGPT, OpenAI" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[ChatGPT] 챗GPT function 기능 이용해보기" />
    <meta name="twitter:description" content="서론 작년 말 출시하여 현재 1년도 안 된 사이에 엄청난 이용자가 생긴 AI 대화형 인공지능 ChatGPT(이하 챗GPT). 현재 GPT-4 모델 출시, 플러그인, 추가 기능 등등 많은 업데이트도 되고 있는 상황이다. 하지만 챗GPT의 주 목적은 사람과 자연스러운 대화를 나누는 것이기 때문에 간혹 모르는 주제의 내용임에도 잘못된 정보를 전달하는 등의 현상이 발생한다." />
    <meta name="twitter:url" content="http://localhost:4000/" />
    <meta name="twitter:image" content="http://localhost:4000/assets/built/images/chatgpt/gpt-logo.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Siansoft" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="ChatGPT, OpenAI" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Siansoft",
        "logo": "http://localhost:4000/"
    },
    "url": "http://localhost:4000/chat_gpt_function",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:4000/assets/built/images/chatgpt/gpt-logo.jpg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/chat_gpt_function"
    },
    "description": "서론 작년 말 출시하여 현재 1년도 안 된 사이에 엄청난 이용자가 생긴 AI 대화형 인공지능 ChatGPT(이하 챗GPT). 현재 GPT-4 모델 출시, 플러그인, 추가 기능 등등 많은 업데이트도 되고 있는 상황이다. 하지만 챗GPT의 주 목적은 사람과 자연스러운 대화를 나누는 것이기 때문에 간혹 모르는 주제의 내용임에도 잘못된 정보를 전달하는 등의 현상이 발생한다."
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="[ChatGPT] 챗GPT function 기능 이용해보기" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="http://localhost:4000/">Siansoft</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-jekyll" role="menuitem"><a href="/category/react/">react</a></li>
    <li class="nav-python" role="menuitem"><a href="/category/spring/">spring</a></li>
    <li class="nav-java" role="menuitem"><a href="/category/ios/">ios</a></li>
    <li class="nav-jekyll" role="menuitem"><a href="/category/jekyll/">jekyll</a></li>
    <li class="nav-python" role="menuitem"><a href="/category/minimal-mistakes/">minimal-mistakes</a></li>
    <li class="nav-python" role="menuitem"><a href="/category/ssl/">ssl</a></li>
    <li class="nav-python" role="menuitem"><a href="/category/tensorflow/">tensorflow</a></li>
    <li class="nav-python" role="menuitem"><a href="/category/ssh/">ssh</a></li>
    <li class="nav-archive" role="menuitem">
        <a href="/archive.html">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/categories.html">카테고리별 Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag별 Posts</a>
    </li>
</ul>
        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-chatgpt-openai  ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 9 August 2023"> 9 August 2023</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                            <a href='/category/chatgpt/'>CHATGPT</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">[ChatGPT] 챗GPT function 기능 이용해보기</h1>
            </header>

            <!--
            
            <figure class="post-full-image" style="background-image: url(/assets/built/images/chatgpt/gpt-logo.jpg)">
            </figure>
            
            -->

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h2 id="서론">서론</h2>

<p>작년 말 출시하여 현재 1년도 안 된 사이에 엄청난 이용자가 생긴 AI 대화형 인공지능 ChatGPT(이하 챗GPT).</p>

<p>현재 GPT-4 모델 출시, 플러그인, 추가 기능 등등 많은 업데이트도 되고 있는 상황이다.</p>

<p>하지만 챗GPT의 주 목적은 사람과 자연스러운 대화를 나누는 것이기 때문에 간혹 모르는 주제의 내용임에도 잘못된 정보를 전달하는 등의 현상이 발생한다.</p>

<p>예를 들어 날씨를 알려달라고 한다거나, 비 유명인의 정보 등을 알려달라고 하면 그럴듯한 답변을 내놓지만 정보가 정확하지 않다.</p>

<p>이런 점 등을 OpenAI에서 추가로 제공하는 <strong>function</strong> 기능을 이용하여 보완을 할 수 있는데, 챗GPT를 이용하여 서비스를 제공하는 측에서
자신들의 커스텀 함수를 이용하여 챗GPT에게 추가로 자신들이 원하는 기능을 제공할 수 있게 만들 수 있다.</p>

<p>function 기능을 사용하여 정확한 날씨 정보를 응답하게 하거나, 자사 측 서비스를 활용하여 api를 사용하거나 메일을 보내는 등의 기능을 활용할 수 있다.</p>

<p>그래서 이 기능을 써보기 위해 OpenAI 설명서에 있는 function 기능을 한글로 나름 번역해서 테스트 해보았다.</p>

<h3 id="환경">환경</h3>

<ul>
  <li>gpt-3.5-turbo</li>
  <li>nextjs (테스트용)</li>
</ul>

<h2 id="1-테스트용-앱-준비">1.	테스트용 앱 준비</h2>

<p>기존에 챗GPT API를 테스트하기 위해 따로 nextjs로 만들어 둔 간단한 테스트 앱이 있는데, 이를 이용하여 function 테스트를 진행하였다.</p>

<p><img src="\assets\built\images\chatgpt\chatgpt_function_1.jpg" alt="img" /></p>

<h2 id="2-코드-입력">2.	코드 입력</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 날씨 정보를 알려주는 함수</span>
<span class="kd">function</span> <span class="nx">get_current_weather</span><span class="p">(</span><span class="nx">location</span><span class="p">,</span> <span class="nx">unit</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">섭씨</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">weather_info</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">location</span><span class="p">:</span> <span class="nx">location</span><span class="p">,</span>
    <span class="na">temperature</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="na">unit</span><span class="p">:</span> <span class="nx">unit</span><span class="p">,</span>
    <span class="na">forecast</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">맑음</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">바람</span><span class="dl">"</span><span class="p">],</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="nx">weather_info</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 챗GPT api 요청</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">onSubmit</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

  <span class="c1">// 메시지 작성중 체크</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">msgCheck</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">메세지 작성중입니다.</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// 기존 응답값 제거</span>
  <span class="nx">setResult</span><span class="p">(</span><span class="dl">""</span><span class="p">);</span>

  <span class="c1">// 챗gpt에 api 요청</span>
  <span class="kd">let</span> <span class="nx">thisForm</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">messages</span> <span class="o">=</span> <span class="p">[{</span> <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span> <span class="na">content</span><span class="p">:</span> <span class="nx">thisForm</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">}];</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://api.openai.com/v1/chat/completions</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_OPENAI_API_KEY</span><span class="p">}</span><span class="s2">`</span>
      <span class="p">},</span>
      <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
        <span class="na">model</span><span class="p">:</span> <span class="dl">"</span><span class="s2">gpt-3.5-turbo</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">messages</span><span class="p">:</span> <span class="nx">messages</span><span class="p">,</span>
        <span class="na">functions</span><span class="p">:</span> <span class="p">[</span>  <span class="c1">// function 기능에 사용할 정보, 챗GPT가 프롬프트를 분석하여 function 기능이 필요한지 아닌지 분석하는데 사용된다.</span>
          <span class="p">{</span>
            <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">get_current_weather</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">주어진 지역의 날씨 조회</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">parameters</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">,</span>
              <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">location</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span>
                  <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">각 나라의 도시 혹은 특정 지역, 예를 들어 서울</span><span class="dl">"</span>
                <span class="p">},</span>
                <span class="na">unit</span><span class="p">:</span> <span class="p">{</span>
                  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span>
                  <span class="na">enum</span><span class="p">:</span> <span class="p">[</span>
                    <span class="dl">"</span><span class="s2">섭씨</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">화씨</span><span class="dl">"</span>
                  <span class="p">]</span>
                <span class="p">}</span>
              <span class="p">},</span>
              <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">location</span><span class="dl">"</span><span class="p">]</span>  <span class="c1">// 사용자 정의 함수(get_current_weather 함수)에 필요한 필수 값. 챗gpt는 프롬프트를 분석하여 이 값을 리턴해준다.</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="na">function_call</span><span class="p">:</span> <span class="dl">"</span><span class="s2">auto</span><span class="dl">"</span> <span class="c1">// function 기능을 자동으로 분석해서 사용할지 판단하도록 한다.</span>
      <span class="p">}),</span>
    <span class="p">});</span>

    <span class="c1">// 챗gpt api response</span>
    <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>

    <span class="c1">// 응답문을 분석하여 챗gpt가 function 기능이 필요하다 판단되면</span>
    <span class="c1">// 응답문에 function_call이란 값을 리턴한다.</span>
    <span class="c1">// 이를 이용하여 function이 필요한지 아닌지 분기하여 function이 필요한 프롬프트라면</span>
    <span class="c1">// 기존에 미리 작성한 함수 등을 이용하여(현재는 위의 get_current_weather 함수) 추가 정보를 재차 챗gpt에 요청한다.</span>
    <span class="c1">// 그러면 챗gpt는 총 두번의 요청을 받은 뒤 사용자가 정의한 function대로 대답을 해주게 된다.</span>
    <span class="kd">const</span> <span class="nx">resMessage</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">message</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">resMessage</span><span class="p">.</span><span class="nx">function_call</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// function_call 값이 있는 지 확인</span>
      <span class="kd">const</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">resMessage</span><span class="p">.</span><span class="nx">function_call</span><span class="p">.</span><span class="nx">arguments</span><span class="p">);</span>  <span class="c1">// 챗gpt가 프롬프트를 분석해서 사용자 정의 함수에 필요한 필수 값을 리턴해준다.</span>
      <span class="kd">const</span> <span class="nx">functionRes</span> <span class="o">=</span> <span class="nx">get_current_weather</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">location</span><span class="p">);</span>       <span class="c1">// 사용자 정의 함수로 챗gpt에 보낼 정보</span>

      <span class="c1">// 챗gpt에 보낼 값 재가공</span>
      <span class="nx">messages</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">resMessage</span><span class="p">);</span>
      <span class="nx">messages</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">function</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">name</span><span class="p">:</span> <span class="nx">resMessage</span><span class="p">.</span><span class="nx">function_call</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
        <span class="na">content</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">functionRes</span><span class="p">)</span>
      <span class="p">});</span>

      <span class="c1">// 2차 요청</span>
      <span class="kd">const</span> <span class="nx">secondResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://api.openai.com/v1/chat/completions</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_OPENAI_API_KEY</span><span class="p">}</span><span class="s2">`</span>
        <span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
          <span class="na">model</span><span class="p">:</span> <span class="dl">"</span><span class="s2">gpt-3.5-turbo</span><span class="dl">"</span><span class="p">,</span>
          <span class="na">messages</span><span class="p">:</span> <span class="nx">messages</span><span class="p">,</span>
        <span class="p">}),</span>
      <span class="p">});</span>

      <span class="c1">// 챗gpt api 2차 response</span>
      <span class="kd">const</span> <span class="nx">secRes</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">secondResponse</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">secRes</span><span class="p">);</span>

      <span class="nx">result</span> <span class="o">=</span> <span class="nx">secRes</span><span class="p">.</span><span class="nx">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">message</span><span class="p">.</span><span class="nx">content</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="nx">resMessage</span><span class="p">.</span><span class="nx">content</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 화면에 출력</span>
    <span class="nx">setResult</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>

  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Consider implementing your own error handling logic here</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="nx">setMsgCheck</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>아래에 링크해 둔 OpenAI의 가이드 글을 거의 그대로 가져와서 한글로 바꾸고 주석을 추가해놓은 javascript 코드이다.</p>

<p>위 코드의 주석에도 적어놓았지만, 간단하게 작동 방식을 설명하자면 아래와 같다.</p>

<ol>
  <li>사용자가 챗GPT에게 API를 요청한다. 이 때, function을 사용하기 위하여 function 관련 정보를 같이 넘겨준다.</li>
  <li>챗GPT가 요청받은 function 관련 정보를 이용하여 프롬프트를 분석 후 function 기능이 필요한 문구인지 확인한다.</li>
  <li>챗GPT가 응답 시 function 기능이 필요한지 아닌지 여부를 포함하여 응답한다.</li>
  <li>function 기능이 필요하지 않다면 그대로 응답문을 리턴한다.</li>
  <li>function 기능이 필요하다면 사용자가 필요로 한 값을 리턴해주고 사용자는 이 값을 이용하여 자신의 함수를 동작시킨다.</li>
  <li>사용자 함수 동작 후 챗GPT에게 필요한 정보를 포함하여 2차 요청을 한다.</li>
  <li>챗GPT는 필요 정보를 받은 뒤, 사용자가 정의한 값을 이용하여 응답문을 리턴한다.</li>
</ol>

<h2 id="3-결과-확인">3.	결과 확인</h2>

<p>function의 좋은 점은 사용자 함수를 사용한다는 점도 있지만, 챗GPT가 프롬프트를 분석하여 function이 필요하지 않은 문장이라면
평소처럼 일반적인 대답을 해준다는 점이다.</p>

<p><img src="\assets\built\images\chatgpt\chatgpt_function_2.jpg" alt="img" /></p>

<p>위 결과 화면처럼 function이 필요하지 않은 프롬프트라면 그냥 평소처럼 일반적인 대답을 해준다.</p>

<p><img src="\assets\built\images\chatgpt\chatgpt_function_3.jpg" alt="img" /></p>

<p>하지만 위 처럼 function이 필요한 구문이 들어온다면 챗GPT가 function이 필요한 기능이라는 1차 응답을 보내게 되고
이를 이용하여 사용자가 2차 요청을 보내면 2차 응답에서 최종적으로 사용자가 정의한 대로 응답을 받아볼 수 있게 된다.</p>

<p>옆에 같이 띄워놓은 콘솔에도 응답이 2번 온 모습을 확인할 수 있다.</p>

<p><img src="\assets\built\images\chatgpt\chatgpt_function_4.jpg" alt="img" /></p>

<p>참고로 function 기능을 사용하지 않으면 위처럼 날씨를 알 수 없다고 하거나, 잘못된 날씨 정보를 응답해준다.</p>

<h2 id="추후-공부해야할-부분">추후 공부해야할 부분</h2>

<p>이번엔 OpenAI쪽의 가이드 글을 그대로 사용해 본 것이라서 사용자가 2차 요청할 때 보낸 weather_info와 같은 사용자 값이
어떤 구조로 요청을 하면 되는 지에 대한 이해가 아직 낮은 상태이다.</p>

<p>OpenAI쪽에선 json 형식이면 된다고 하는 것 보니 json 형식만 지키면 key와 value 값도 알아서 분석하는 것이 아닌가 추측된다.</p>

<h2 id="마치며">마치며</h2>

<p>추후 사용자가 만든 API를 이용해본다던가, 다른 사람에게 메일을 보내본다던가 테스트 해 볼 여지가 아직 많이 남은 것 같다.</p>

<h2 id="참조-사이트">참조 사이트</h2>
<p><a href="https://platform.openai.com/docs/guides/gpt/function-calling" title="Chat GPT function 가이드">Chat GPT function 가이드 페이지</a></p>


                </div>
            </section>
            
                
                <a href='/tag/chatgpt-openai/'>CHATGPT, OPENAI</a>
                
            
            <!-- Email subscribe form at the bottom of the page -->
            <!--
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to Siansoft</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
                </section>
            
            -->
            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            var this_page_url = 'http://localhost:4000/chat_gpt_function';
                            var this_page_identifier = '/chat_gpt_function';
                            var this_page_title = '[ChatGPT] 챗GPT function 기능 이용해보기';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://Siansoft.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/react_porting_by_electron">
                <div class="post-card-image" style="background-image: url(/assets/built/images/electron/electron_logo.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/react_porting_by_electron">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Electron, electronjs, react</span>
                            
                        
                    

                    <h2 class="post-card-title">[ElectronJS] React 앱을 데스크톱 응용프로그램으로 변환(포팅)하기</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>서론

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                <span class="reading-time">
                    
                    
                      3 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="http://localhost:4000/">
            
            <span>Siansoft</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">[ChatGPT] 챗GPT function 기능 이용해보기</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=%5BChatGPT%5D+%EC%B1%97GPT+function+%EA%B8%B0%EB%8A%A5+%EC%9D%B4%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0&amp;url=https://sianlab.github.io/chat_gpt_function"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://sianlab.github.io/chat_gpt_function"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        
        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="http://localhost:4000/">Siansoft</a> &copy; 2023</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                <h1 class="subscribe-overlay-title">Search Siansoft</h1>
                <p class="subscribe-overlay-description">
                    lunr.js를 이용한 posts 검색 </p>
                <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  />
    <input class="location" type="hidden" name="location"  />
    <input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()"
               id="searchtext" type="text" name="searchtext"
               placeholder="Search..." />
    </div>
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
</span>
            </div>
        </div>
    


    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-xxxxxxxx-x', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
